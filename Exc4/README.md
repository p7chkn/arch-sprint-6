## Проектирование продажи ОСАГО

[Схема технического решения](InsureTech_C4_сontainer-diagram-osago.drawio.xml)

### Описание технического решения
1. Выделяем отдельный сервис, которые умеет ходить по страховым компаниям и получать решения о
выдаче предложения по ОСАГО.
2. Алгоритм получения предложения:
   1. Клиент делает запрос в core-app, открывается WS соединение.
   2. Cope-app делает запрос в osago-aggregato с данными клиента и уникальным идентификатором запроса
   связанным с WS соединением (чтобы потом можно было легко установить ответ).
   3. Osago-aggregato опрашивает страховые компании на предложения с time-out < 55 секунд.
   4. Если за это время ответа нет - osago-aggregato - ничего не делает.
   5. Если за 60 секунд WS соединения нет ответа - одно обрывается с ошибкой о том, что не удалось
   получить предложения.
   6. Если osago-aggregato успевает получить предложение, он делает запрос в core-app с нужным
   идентификатором и данными предложения.
   7. Core-app сохраняет нужные данные клиента и продолжает оформление ОСАГО.

Альтернативные варианты реализации:
1. Можно устанавливать WS напрямую с osago-aggregato, но тут есть минусы:
   1. Выставление наружу еще одного сервиса - доп требования безопасности, авторизации и тд
   2. Само оформление будет выполняться все равно в core-app, там уже есть логика по этому поводу
   и первичная валидация запроса пользователя на ОСАГО лучше смотрится там, чем дублирование такой
   логики в osago-aggregato. 
2. Получать обновления через шину данных, а не через запрос, но есть минус того, что данные нужны 
как можно быстрее, в таком варианте задержка будет больше.